!function(s){s(document).ready(function(){function l(e){try{SqueezeBox.initialize(),SqueezeBox.assign($$("a.modal-thumb"),{parse:"rel"}),""!=e&&s(e).select2({width:"auto",dropdownAutoWidth:"auto",minimumResultsForSearch:-1})}catch(e){}}function r(e,t,a,o){return'<a href="#" class="showhidearrow">'+Joomla.JText._("COM_REDSHOP_SUB_ATTRIBUTE")+': <span class="propertyName"></span><img class="arrowimg" src="'+redSHOP.RSConfig._("SITE_URL")+'media/com_redshop/images/arrow.png" alt=""/></a><div class="attr_tbody form-inline divInspectFromHideShow"><input type="hidden" value="0" name="'+e+'[count_subprop]" class="count_subprop" /><input type="hidden" value="'+a+'" name="'+e+'[key_prop]" class="key_prop" /><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_SUB_ATTRIBUTE")+'</label><input type="text" class="form-control propertyInput" name="'+e+'[name]" value=""><input type="hidden"  name="attribute['+t+"][property]["+a+'][mainImage]" value="" id="propmainImage'+t+a+'"><input type="hidden" name="attribute['+t+"][property]["+a+'][property_image]" id="propertyImageName'+t+a+'" /></div></div><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_PRICE")+'</label><div class="priceInput"><select id="attribute_'+t+"_property_"+a+'_oprand" name="'+e+'[oprand]" class="input-xmini"><option value="+">+</option><option value="=">=</option><option value="-">-</option><option value="*">*</option><option value="/">/</option></select><input type="text" class="form-control" value="" name="'+e+'[price]"></div></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_PROPERTY_NUMBER")+'</label><input type="text" name="'+e+'[number]" value="" class="vpnrequired "></div></div><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_EXTRAFIELD")+'</label><input type="text" class="" name="'+e+'[extra_field]" value="" /></div></div><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ORDERING")+'</label><input type="number" class="form-control" name="'+e+'[order]" value="'+o+'"></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DEFAULT_SELECTED")+'</label><input type="checkbox" value="1" name="'+e+'[default_sel]" /></div></div></div><div class="row"><div class="col-sm-4"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_PUBLISHED")+'</label><input type="checkbox" name="'+e+'[published]" checked="checked" value="1" /></div></div><div class="col-sm-8"><input value="'+Joomla.JText._("COM_REDSHOP_DELETE")+'" class="btn btn-danger delete_property btn-small" type="button" /><a class="btn btn-success add_subproperty btn-small" href="#">+ '+Joomla.JText._("COM_REDSHOP_NEW_SUB_PROPERTY")+'</a></div></div><div class="attribute_parameter_tr divFromHideShow"><div class="row showsubproperty"><div class="col-sm-6"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_TITLE")+'</label><input class="form-control" type="text" name="'+e+'[subproperty][title]" value=""></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_SUBATTRIBUTE_REQUIRED")+'</label><input type="checkbox" value="1" name="'+e+'[req_sub_att]" /></div></div><div class="col-sm-6"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DISPLAY_ATTRIBUTE_TYPE")+'</label><select id="attribute_'+t+"_property_"+a+'_setdisplay_type" name="'+e+'[setdisplay_type]" class="input-medium"><option value="dropdown" selected="selected" >'+Joomla.JText._("COM_REDSHOP_DROPDOWN_LIST")+'</option><option value="radio" >'+Joomla.JText._("COM_REDSHOP_RADIOBOX")+'</option></select></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_SUBATTRIBUTE_MULTISELECTED")+'</label><input type="checkbox" value="1" name="attribute[+gh+][property]['+a+'][multi_sub_att]" /></div></div></div><div class="sub_attribute_table"></div></div></div>'}s(".add_attribute").on("click",function(e){e.preventDefault();var t=s(".count_attr"),e=parseInt(t.val());t.val(e+1);t="attribute["+e+"]";s(".mainTableAttributes").append('<a href="#" class="showhidearrow">'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_NAME")+': <span class="attributeName"></span><img class="arrowimg" src="'+redSHOP.RSConfig._("SITE_URL")+'media/com_redshop/images/arrow.png" alt=""/></a><div class="attribute_table divInspectFromHideShow"><input type="hidden" name="'+t+'[count_prop]" class="count_prop" value="1" /><input type="hidden" value="'+e+'" name="'+t+'[key_attr]" class="key_attr" /><div class="col-sm-12 oneAttribute"><div class="rowAttribute"><div class="col-sm-5"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_NAME")+'</label><input type="text" class="form-control attributeInput" name="'+t+'[name]" value="" /></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DISPLAY_ATTRIBUTE_TYPE")+'</label><select id="attribute_'+e+'_display_type" name="'+t+'[display_type]" class="input-medium"> <option value="dropdown" selected="selected">'+Joomla.JText._("COM_REDSHOP_DROPDOWN_LIST")+'</option><option value="radio">'+Joomla.JText._("COM_REDSHOP_RADIOBOX")+'</option></select></div><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_DESCRIPTION")+'</label><input class="form-control" type="text" name="'+t+'[attribute_description]" value="" /></div></div><div class="col-sm-3"><div class="form-group"><label>'+Joomla.JText._("COM_REDSHOP_ORDERING")+'</label><input class="text-center form-control" type="text" name="'+t+'[ordering]" value="'+(e+1)+'" /></div></div><div class="col-sm-4"><div class="form-group"><input type="checkbox" name="'+t+'[required]" value="1" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_REQUIRED")+'</label></div><div class="form-group"><input type="checkbox" value="1" name="'+t+'[allow_multiple_selection]" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_ALLOW_MULTIPLE_PROPERTY_SELECTION")+'</label></div><div class="form-group"><input type="checkbox" value="1"  name="'+t+'[hide_attribute_price]" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_HIDE_ATTRIBUTE_PRICE")+'</label></div><div class="form-group"><input type="checkbox" checked="checked" name="'+t+'[published]" value="1" /><label class="checkbox inline">'+Joomla.JText._("COM_REDSHOP_PUBLISHED")+'</label></div></div><a class="btn btn-success add_property btn-small">+ '+Joomla.JText._("COM_REDSHOP_ADD_SUB_ATTRIBUTE")+'</a></div></div><div class="property_table">'+r(t+"[property][0]",e,0,1)+"</div></div>"),l("#attribute_"+e+"_display_type, #attribute_"+e+"_property_0_setdisplay_type, #attribute_"+e+"_property_0_oprand")}),s("#mainTableAttributes").on("click",".delete_subproperty",function(){var e,t;confirm(Joomla.JText._("COM_REDSHOP_WARNING_TO_DELETE"))&&((e=s(this)).attr("id")&&(t=e.attr("id").split("_"),s.ajax({url:"index.php?option=com_redshop&view=product_detail&task=delete_subprop&tmpl=component&sp_id="+t[1]+"&subattribute_id="+t[2],type:"POST"})),1==e.closest(".attribute_parameter_tr").find(".sub_attribute_table").size()&&e.closest(".attribute_parameter_tr").find(".showsubproperty").css({display:"none"}),e.closest(".sub_property_table").remove())}).on("click",".deletePropertyMainImage",function(){var e,t;!confirm(Joomla.JText._("COM_REDSHOP_DO_WANT_TO_DELETE"))||(e=s(this)).attr("id")&&(t=e.attr("id").split("_"),s.ajax({url:"index.php?tmpl=component&option=com_redshop&view=product_detail&task=removepropertyImage&pid="+t[1],type:"POST"}),s("#propertyImageName"+t[2]).val(""),s("#propertyImage"+t[2]).css({display:"none"}),e.remove())}).on("click",".deleteSubPropertyMainImage",function(){var e,t;!confirm(Joomla.JText._("COM_REDSHOP_DO_WANT_TO_DELETE"))||(e=s(this)).attr("id")&&(t=e.attr("id").split("_"),s.ajax({url:"index.php?tmpl=component&option=com_redshop&view=product_detail&task=removesubpropertyImage&pid="+t[1],type:"POST"}),s("#subPropertyImageName"+t[2]).val(""),s("#subpropertyImage"+t[2]).css({display:"none"}),e.remove())}).on("click",".delete_property",function(){var e,t;confirm(Joomla.JText._("COM_REDSHOP_WARNING_TO_DELETE"))&&((e=s(this)).attr("id")&&(t=e.attr("id").split("_"),s.ajax({url:"index.php?option=com_redshop&view=product_detail&task=delete_prop&tmpl=component&attribute_id="+t[2]+"&property_id="+t[1],type:"POST"})),e.closest(".attr_tbody").prev(".showhidearrow").remove(),e.closest(".attr_tbody").remove())}).on("click",".delete_attribute",function(){var e,t;confirm(Joomla.JText._("COM_REDSHOP_WARNING_TO_DELETE"))&&((e=s(this)).attr("id")&&(t=e.attr("id").split("_"),s.ajax({url:"index.php?option=com_redshop&view=product_detail&task=delete_attibute&tmpl=component&attribute_id="+t[1]+"&product_id="+t[2]+"&attribute_set_id="+t[3],type:"POST"})),e.closest(".attribute_table").prev(".showhidearrow").remove(),e.closest(".attribute_table").remove())}).on("click",".add_property",function(e){e.preventDefault();var t=s(this),a=parseInt(t.closest(".attribute_table").find(".key_attr").val()),o=t.closest(".attribute_table").find(".count_prop"),i=parseInt(o.val());o.val(i+1);e=i+1,o="attribute["+a+"][property]["+i+"]";t.closest(".attribute_table").find(".property_table").append(r(o,a,i,e)),l("#attribute_"+a+"_property_"+i+"_setdisplay_type, #attribute_"+a+"_property_"+i+"_oprand")}).on("click",".add_subproperty",function(e){e.preventDefault();var t=s(this);t.parents(".attr_tbody").find(".showsubproperty").css({display:"block"}),t.parents(".attr_tbody").find(".attribute_parameter_tr").css({display:"block"});var a=parseInt(t.parents(".attribute_table").find(".key_attr").val()),o=parseInt(t.parents(".attr_tbody").find(".key_prop").val()),i=t.parents(".attr_tbody").find(".count_subprop"),e=parseInt(i.val());i.val(e+1);i=e+1,o="attribute["+a+"][property]["+o+"][subproperty]["+e+"]";t.parents(".attr_tbody").find(".sub_attribute_table").append('<div class="sub_property_table"><div class="row"><div class="col-sm-2"><label>'+Joomla.JText._("COM_REDSHOP_PARAMETER")+'</label><input type="text" name="'+o+'[name]" ><input type="hidden" name="'+o+'[mainImage]" id="subpropmainImage'+a+e+'" /><input type="hidden" name="'+o+'[image]" id="subPropertyImageName'+a+e+'" /></div><div class="col-sm-2"><label>'+Joomla.JText._("COM_REDSHOP_PRICE")+'</label><select id="attribute_'+a+"_subproperty_"+e+'_oprand" name="'+o+'[oprand]" class="input-xmini"><option value="+">+</option><option value="=">=</option><option value="-">-</option><option value="*">*</option><option value="/">/</option></select><input type="text" name="'+o+'[price]" class="input-mini"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_PROPERTY_NUMBER")+'</label><input type="text" name="'+o+'[number]" value="" class="vpnrequired"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_ATTRIBUTE_EXTRAFIELD")+'</label><input type="text" name="'+o+'[extra_field]"></div><div class="col-sm-3"><label>'+Joomla.JText._("COM_REDSHOP_ORDERING")+'</label><input type="number" value="'+i+'" name="'+o+'[order]"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_PUBLISHED")+'</label><input type="checkbox" value="1" checked="checked" name="'+o+'[published]"></div><div class="col-sm-1"><label>'+Joomla.JText._("COM_REDSHOP_DEFAULT_SELECTED")+'</label><input type="checkbox" value="1" name="'+o+'[chk_propdselected]"></div><div class="col-sm-1"><input value="'+Joomla.JText._("COM_REDSHOP_DELETE")+'" class="btn btn-danger delete_subproperty btn-small" type="button" /></div></div></div>'),l("#attribute_"+a+"_subproperty_"+e+"_oprand")}).on("click",".showhidearrow",function(e){e.preventDefault();e=s(this).next(".divInspectFromHideShow");"none"==e.css("display")?(e.show(),s(this).find("img").attr("src",redSHOP.RSConfig._("SITE_URL")+"media/com_redshop/images/arrow.png")):(e.hide(),s(this).find("img").attr("src",redSHOP.RSConfig._("SITE_URL")+"media/com_redshop/images/arrow_d.png"))}).on("change",".attributeInput",function(){console.log(11),s(this).parents(".attribute_table").prev(".showhidearrow").find(".attributeName").text(s(this).val())}).on("change",".propertyInput",function(){s(this).parents(".attr_tbody").prev(".showhidearrow").find(".propertyName").text(s(this).val())}),s("dd.tabs:visible").on("click",'.checkbox.inline[name*="[preselected]"] input',function(){return 1==s(this).parents(".attribute_table").find('.checkbox.inline input[name*="[allow_multiple_selection]"]').is(":checked")||(1<s(this).parents(".attribute_table").find('.checkbox.inline[name*="[preselected]"] input:checked').length?(alert(Joomla.JText._("COM_REDSHOP_ALERT_PRESELECTED_CHECK")),!1):void 0)}).on("click",'.checkbox.inline input[name*="[allow_multiple_selection]"]',function(){0==s(this).is(":checked")&&s(this).parents(".attribute_table").find('.checkbox.inline[name*="[preselected]"] input').each(function(e,t){s(t).prop("checked",!1)})})})}(jQuery);